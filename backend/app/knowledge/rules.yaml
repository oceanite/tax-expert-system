rules:

  - id: R1
    description: "Tarif progresif lapisan pertama"
    condition: "PKP <= 60000000"
    action:
      tax_rate: 0.05

  - id: R2
    description: "Tarif progresif lapisan kedua"
    condition: "PKP > 60000000 and PKP <= 250000000"
    action:
      tax_rate: 0.15

  - id: R3
    description: "Tarif progresif lapisan ketiga"
    condition: "PKP > 250000000 and PKP <= 500000000"
    action:
      tax_rate: 0.25

  - id: R4
    description: "Tarif progresif lapisan keempat"
    condition: "PKP > 500000000 and PKP <= 5000000000"
    action:
      tax_rate: 0.30

  - id: R5
    description: "Tarif progresif lapisan kelima"
    condition: "PKP > 5000000000"
    action:
      tax_rate: 0.35

  - id: R6
    description: "Sumbangan bukan objek pajak"
    condition: "income_type == 'donation' and related_to_work == false"
    action:
      taxable: false

  - id: R7
    description: "Zakat/infak/sedekah melalui lembaga resmi bukan objek pajak"
    condition: "income_type in ['zakat', 'infak', 'sedekah'] and via_official_institution == true"
    action:
      taxable: false

  - id: R8
    description: "Penghasilan selain kategori pengecualian dianggap kena pajak"
    condition: "income_type in ['salary','business','interest','dividend','royalty','rental','capital_gain','insurance']"
    action:
      taxable: true

  - id: R9
    description: "Jika bukan objek pajak maka pajak final = 0"
    condition: "taxable == false"
    action:
      final_tax: 0

  - id: R10
    description: "Jika kena pajak, hitung final tax"
    condition: "taxable == true"
    action:
      formula: "PKP * tax_rate"

  - id: R11
    description: "Validasi input PKP"
    condition: "PKP < 0"
    action:
      error: "Invalid PKP input"